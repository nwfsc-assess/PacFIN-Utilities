<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Pull catch data from PacFIN — PullCatch.PacFIN • pacfintools</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Pull catch data from PacFIN — PullCatch.PacFIN"><meta property="og:description" content="Pull catch data from the Comprehensive Fish Ticket table in PacFIN."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pacfintools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/sablefish_example.html">Working through sablefish PacFIN data</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Pull catch data from PacFIN</h1>

    <div class="hidden name"><code>PullCatch.PacFIN.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Pull catch data from the Comprehensive Fish Ticket table in PacFIN.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">PullCatch.PacFIN</span><span class="op">(</span></span>
<span>  <span class="va">pacfin_species_code</span>,</span>
<span>  council_code <span class="op">=</span> <span class="st">"P"</span>,</span>
<span>  username <span class="op">=</span> <span class="fu"><a href="getUserName.html">getUserName</a></span><span class="op">(</span><span class="st">"PacFIN"</span><span class="op">)</span>,</span>
<span>  password <span class="op">=</span> <span class="fu"><a href="ask_password.html">ask_password</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  savedir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  addnominal <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-pacfin-species-code">pacfin_species_code<a class="anchor" aria-label="anchor" href="#arg-pacfin-species-code"></a></dt>
<dd><p>A vector of strings specifying the PacFIN species
code(s) you are interested in. This has sometimes been referred to as
<code>"SPID"</code> in legacy sql scripts. An example for sablefish would be
<code>pacfin_species_code = "SABL"</code>. Lists of species codes in <a href="https://pacfin.psmfc.org/pacfin_pub/data_rpts_pub/code_lists/sp_tree.txt" class="external-link">hierarchical order</a>,
by
<a href="https://pacfin.psmfc.org/pacfin_pub/data_rpts_pub/code_lists/agency_spcodes.txt" class="external-link">organization</a>,
and <a href="https://pacfin.psmfc.org/pacfin_pub/data_rpts_pub/code_lists/agency_spcodes_spid.txt" class="external-link">alphabetically organized</a>
can be found on the <a href="https://pacfin.psmfc.org" class="external-link">PacFIN website</a>. Often you
will want to include nominal species categories. Where, nominal (i.e.,
<a href="https://www.google.com/search?q=NOMINAL&amp;rlz=1C1GCEJ_enUS866US866&amp;sourceid=chrome&amp;ie=UTF-8" class="external-link">existing in name only</a>)
means information for a given species that is "derived" from non-species
specific information, e.g., species complexes that are split out by species
compositions like "nominal aurora rockfish" which would be <code>ARR1</code>. For some
functions, these nominal categories can automatically be added, see the
argument <code>addnominal</code>.</p></dd>


<dt id="arg-council-code">council_code<a class="anchor" aria-label="anchor" href="#arg-council-code"></a></dt>
<dd><p>A vector of character strings specifying the council code
that you wish to retain data for. The default <code>"P"</code> means data will only be
returned for the Pacific Fisheries Management Council. Other accepted
values are <code>"N"</code> or <code>"*"</code>.</p></dd>


<dt id="arg-username">username<a class="anchor" aria-label="anchor" href="#arg-username"></a></dt>
<dd><p>Most often, this is a string containing your username for the
database of interest. You can use <code><a href="getUserName.html">getUserName()</a></code> if you prefer to not
enter this argument and assume the default search and/or rules for finding
your username will work. This is the default behavior if you leave
<code>username</code> as a missing argument, i.e., <code>username &lt;- getUserName(database = database)</code>. Sometimes this search will fail because of legacy rules, which
are unknown to the development team, that were used to create your
username. Please email the maintainer of this package if you need more
functionality here.</p></dd>


<dt id="arg-password">password<a class="anchor" aria-label="anchor" href="#arg-password"></a></dt>
<dd><p>Most often, this is a string containing your password for
the database of interest. You can use the function <code><a href="ask_password.html">ask_password()</a></code> if you
would prefer to be prompted for your password. Please do not share this
password with anyone or push code to a repository that has your password
saved in it.</p></dd>


<dt id="arg-savedir">savedir<a class="anchor" aria-label="anchor" href="#arg-savedir"></a></dt>
<dd><p>A file path to the directory where the results will be saved.
The default is NULL.</p></dd>


<dt id="arg-addnominal">addnominal<a class="anchor" aria-label="anchor" href="#arg-addnominal"></a></dt>
<dd><p>A logical, where the default, <code>TRUE</code>, adds nominal
PacFIN species code to <code>pacfin_species_code</code>. <code>FALSE</code>
leaves <code>pacfin_species_code</code> as input by the user, which will miss
catch for species such as dover sole that have more than one species
code within PacFIN, e.g., <code>pacfin_species_code = c("DOVR", "DVR1")</code>.
Users can also input a vector to pacfin_species_code if you want to
specify the species and the nominal species code without searching for
it. This is helpful for when you are getting data for two species and
you only want nominal catch for one or if you only wanted nominal catch.
Nominal species code will be searched for using <code><a href="PullNominal.PacFIN.html">PullNominal.PacFIN()</a></code> if
the input value for <code>addnominal</code> is <code>TRUE</code>.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>A logical specifying if output should be written to the
screen or not. Good for testing and exploring your data but can be turned
off when output indicates information that you already know. The printing
of output to the screen does not affect any of the returned objects. The
default is to always print to the screen, i.e., <code>verbose = TRUE</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A <code>.RData</code> file is saved with the object inside the file stored as
<code>catch.pacfin</code>. This same data frame is also returned invisibly.</p>
    </div>
    <div id="details">
    <h2>Details</h2>

<div class="section">
<h3 id="species-with-special-considerations">Species with special considerations<a class="anchor" aria-label="anchor" href="#species-with-special-considerations"></a></h3>

<div class="section">
<h4 id="urck">URCK<a class="anchor" aria-label="anchor" href="#urck"></a></h4>


<p>There is a rockfish (URCK) category that consists of unassigned rockfish
landings. The majority of the catch is prior to 2001. Currently, there is no
agreed upon methodology to parsed these landing out to specific rockfish
species. At present, landings in this category are not included in
species-specific rockfish catch pulls.</p>
</div>

<div class="section">
<h4 id="pop">POP<a class="anchor" aria-label="anchor" href="#pop"></a></h4>


<p>In PacFIN there are four species code that can be associated with Pacific
ocean perch. These are POP, POP1, POP2, UPOP. The POP1 is general shelf/slope
rockfish and not Pacific ocean perch specific landings. These records occur
only in Oregon. As of the 2017 assessment, these records should be removed
from the catch file.</p>
</div>


</div>

<div class="section">
<h3 id="searching-for-species">Searching for species<a class="anchor" aria-label="anchor" href="#searching-for-species"></a></h3>


<p>Values passed to <code>pacfin_species_code</code> are searched for in their exact form.
That is, there are no regular expression searches so mistakes such as
<code>" POP"</code> will not be found. In my experiences these mistakes in the species
codes are more common for PacFIN species codes that are three letters rather
than the standard four letters.</p>
</div>

    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index">
<ul><li><p><code><a href="PullNominal.PacFIN.html">PullNominal.PacFIN()</a></code> determines the nominal species codes</p></li>
<li><p><code><a href="sql.html">sql_catch()</a></code> writes the sql code to pull the data</p></li>
</ul></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Kelli F. Johnson</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">catch.pacfin</span> <span class="op">&lt;-</span> <span class="fu">PullCatch.PacFIN</span><span class="op">(</span><span class="st">"PTRL"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Check for confidentiality by year</span></span></span>
<span class="r-in"><span><span class="co"># though you would also want to do this by your gear types</span></span></span>
<span class="r-in"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">catch.pacfin</span>, <span class="va">LANDING_YEAR</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>count <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html" class="external-link">n_distinct</a></span><span class="op">(</span><span class="va">VESSEL_ID</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">count</span> <span class="op">&lt;</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># look for foreign landings</span></span></span>
<span class="r-in"><span><span class="va">catch.pacfin</span> <span class="op">&lt;-</span> <span class="fu">PullCatch.PacFIN</span><span class="op">(</span><span class="st">"PTRL"</span>, council_code <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"*"</span>, <span class="st">"N"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Counts of NROW() by area code(s)</span></span></span>
<span class="r-in"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">catch.pacfin</span>, <span class="va">ORIG_PACFIN_CATCH_AREA_CODE</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Chantel R. Wetzel, Ian G. Taylor, Kelli F. Johnson.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

